
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="prev" href="..">
      
      
        <link rel="next" href="../github/">
      
      <link rel="icon" href="../figures/ECPC_logo_simple.svg">
      <meta name="generator" content="mkdocs-1.5.1, mkdocs-material-9.1.21">
    
    
      
        <title>Communicatie met een meetinstrument - Experiment Control with Python Course</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.eebd395e.min.css">
      
      

    
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.7/katex.min.css">
    
      <link rel="stylesheet" href="../stylesheets/extra.css">
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    <body dir="ltr">
  
    
    
      <script>var palette=__md_get("__palette");if(palette&&"object"==typeof palette.color)for(var key of Object.keys(palette.color))document.body.setAttribute("data-md-color-"+key,palette.color[key])</script>
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#communicatie-met-een-meetinstrument" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="Experiment Control with Python Course" class="md-header__button md-logo" aria-label="Experiment Control with Python Course" data-md-component="logo">
      
  <img src="../figures/ECPC_logo_plain.svg" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Experiment Control with Python Course
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Communicatie met een meetinstrument
            
          </span>
        </div>
      </div>
    </div>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="Experiment Control with Python Course" class="md-nav__button md-logo" aria-label="Experiment Control with Python Course" data-md-component="logo">
      
  <img src="../figures/ECPC_logo_plain.svg" alt="logo">

    </a>
    Experiment Control with Python Course
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        Introductie
      </a>
    </li>
  

    
      
      
      

  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          Communicatie met een meetinstrument
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        Communicatie met een meetinstrument
      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#microcontrollers" class="md-nav__link">
    Microcontrollers
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#communicatieprotocol" class="md-nav__link">
    Communicatieprotocol
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#eerste-stappen" class="md-nav__link">
    Eerste stappen
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#een-eenvoudig-script" class="md-nav__link">
    Een eenvoudig script
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../github/" class="md-nav__link">
        Versiebeheer met GitHub
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../basisscript/" class="md-nav__link">
        Basisscript voor het experiment
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../mvc/" class="md-nav__link">
        Model-View-Controller
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../poetry/" class="md-nav__link">
        Poetry
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../cli/" class="md-nav__link">
        Command-line interface
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../gui/" class="md-nav__link">
        Graphical user interfaces
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../eindfeest/" class="md-nav__link">
        Eindopdracht
      </a>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_10" >
      
      
      
        <label class="md-nav__link" for="__nav_10" id="__nav_10_label" tabindex="0">
          Appendices
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_10_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_10">
          <span class="md-nav__icon md-icon"></span>
          Appendices
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../software-tools/" class="md-nav__link">
        Gereedschap
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../firmware/" class="md-nav__link">
        Firmware
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../kleurcodes/" class="md-nav__link">
        Kleurcodes voor weerstanden
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../diodes/" class="md-nav__link">
        De diode: een p-n-overgang
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../zonnecel/" class="md-nav__link">
        Zonnecel
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../voorkennis/" class="md-nav__link">
        Python voorkennis; Batteries (not yet) included
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../faq/" class="md-nav__link">
        FAQ: lijst conventies
      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#microcontrollers" class="md-nav__link">
    Microcontrollers
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#communicatieprotocol" class="md-nav__link">
    Communicatieprotocol
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#eerste-stappen" class="md-nav__link">
    Eerste stappen
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#een-eenvoudig-script" class="md-nav__link">
    Een eenvoudig script
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


<h1 id="communicatie-met-een-meetinstrument">Communicatie met een meetinstrument<a class="headerlink" href="#communicatie-met-een-meetinstrument" title="Permanent link">&para;</a></h1>
<p>Het hart van ieder experiment wordt gevormd door de <em>metingen</em> die worden uitgevoerd. Meetinstrumenten vervullen daarom een belangrijke rol bij het automatiseren van een experiment. De eerste stap die we zullen zetten tijdens het ontwikkelen van een applicatie is het communiceren met ons meetinstrument. We hebben gekozen voor een Arduino Nano 33 IoT,<sup id="fnref:1"><a class="footnote-ref" href="#fn:1">8</a></sup> een zeer compact stukje elektronica rondom een ARM-microcontroller. Naast het uitvoeren van analoge spanningsmetingen kan dit model ook analoge spanningen afgeven dat voor ons heel nuttig gaat blijken. We hebben, speciaal voor dit vak, een stukje <em>firmware</em><sup id="fnref:firmware"><a class="footnote-ref" href="#fn:firmware">1</a></sup> ontwikkeld.<sup id="fnref:2"><a class="footnote-ref" href="#fn:2">9</a></sup></p>
<h2 id="microcontrollers">Microcontrollers<a class="headerlink" href="#microcontrollers" title="Permanent link">&para;</a></h2>
<p>Computers &mdash; zoals de meesten van ons die kennen &mdash; zijn zeer krachtig en ontworpen om zo flexibel mogelijk te zijn. Ze draaien games, e-mail of rekenen klimaatmodellen door. Ze komen in veel vormen: desktops, laptops, tablets en <q>telefoons</q>. Ze bevatten daarom veel losse componenten: snelle processor (CPU), veel geheugen (RAM), veel permanente opslag (SSD), complexe interfaces (HDMI, USB) en een besturingssysteem waarmee je verschillende programma's kunt opstarten en de computer kunt beheren. Computers zijn behoorlijk prijzig.</p>
<p>Een microcontroller daarentegen is veel eenvoudiger. Ze zijn ontworpen voor een beperkte en specifieke taak. Ze hebben veel verschijningsvormen &mdash; de meeste onherkenbaar. Je vindt microcontrollers in de vaatwasser, de magnetron, een draadloos toetsenbord en auto's (letterlijk tientallen verspreid over de hele auto). Ze hebben dan een beperkte taak: ze reageren op de knopjes op je dashboard om het klimaat te regelen of een raam te openen en ze sturen de kleppen in een verbrandingsmotor aan. Microcontrollers bevatten CPU, RAM en <q>SSD</q> vaak in één chip en hebben beperkte interfaces (vaak letterlijk losse pinnetjes die je moet verbinden). De CPU is relatief gezien traag en de hoeveelheid geheugen klein. Voor de beperkte taak is dat niet erg. Een besturingssysteem is niet nodig: als je hem aanzet draait hij meteen het enige programma dat ooit ingeladen is (dit heet dan <em>firmware</em>). Microcontrollers zijn goedkoop en daarom ook uitermate geschikt voor hobbyprojecten.</p>
<p>Een Arduino is zo'n microcontroller. Vaak wordt een Arduino vergeleken met een Raspberry Pi &mdash; een andere goedkope computer. Maar een Raspberry Pi is écht een computer (en daarmee ook complex). Daarmee is een Raspberry Pi veel veelzijdiger, maar ook duurder en is het complexer om een eenvoudig programma te draaien. Apparatuur zoals frequentiegeneratoren en oscilloscopen hebben vaak een microcontroller ingebouwd, maar soms ook een microcomputer analoog aan een Raspberry Pi. Dat maakt voor ons weinig verschil zolang we maar weten hoe we het instrument kunnen aansturen.</p>
<h2 id="communicatieprotocol">Communicatieprotocol<a class="headerlink" href="#communicatieprotocol" title="Permanent link">&para;</a></h2>
<p>Hoe praat je eigenlijk met hardware? Voor fabrikanten zijn er een paar opties:</p>
<ol>
<li>Je maakt gebruik van een al bestaand protocol (een bestaande <em>standaard</em> en je schrijft vervolgens documentatie specifiek voor jouw instrument (bijvoorbeeld de VISA-standaard <sup id="fnref:3"><a class="footnote-ref" href="#fn:3">10</a></sup>, o.a. gebruikt door <em>Tektronix</em> digitale oscilloscopen <sup id="fnref:4"><a class="footnote-ref" href="#fn:4">11</a></sup>)</li>
<li>Je schrijft een <em>proprietary</em><sup id="fnref:proprietary"><a class="footnote-ref" href="#fn:proprietary">2</a></sup> protocol en een bijbehorende bibliotheek die software-ontwikke-laars moeten gebruiken.<sup id="fnref:drivers"><a class="footnote-ref" href="#fn:drivers">3</a></sup> Voorbeelden zijn instrumenten van <em>National Instruments</em> <sup id="fnref:5"><a class="footnote-ref" href="#fn:5">12</a></sup> of de <em>PicoScope</em> digitale oscilloscopen<sup id="fnref:picoscope"><a class="footnote-ref" href="#fn:picoscope">4</a></sup> <sup id="fnref:6"><a class="footnote-ref" href="#fn:6">13</a></sup>.</li>
</ol>
<p>De VISA-standaard is veelgebruikt, maar helaas komen <em>proprietary</em> protocollen veel voor. Dat is jammer, want in het laatste geval moet je het doen met de software die geleverd wordt door de fabrikant. Als die jouw besturingssysteem of favoriete programmeertaal niet ondersteunt heb je simpelweg pech.</p>
<p>Wij gaan gebruik maken van de VISA-standaard. VISA staat voor <em>Virtual Instrument Software Architecture</em> en is héél breed en definieert protocollen om te communiceren via allerlei verouderde computerpoorten en kabels. Hieronder zie je een voorbeeld van verschillende poorten zoals RS232 en GPIB aan de achterkant van een Tektronix TDS210 oscilloscoop.</p>
<p><img alt="Poorten op oscilloscoop" src="../figures/Digitaloszilloskop_Schnittstellen_IMGP1974_WP.jpg" />
Bron: <a href="https://commons.wikimedia.org/wiki/File:Digitaloszilloskop_Schnittstellen_IMGP1974_WP.jpg">Wikimedia Commons</a>.</p>
<p>Maar gelukkig ook via internet en USB, waarvan wij gebruik zullen maken. Onderdeel van VISA is de SCPI standaard <sup id="fnref:7"><a class="footnote-ref" href="#fn:7">14</a></sup>, wat staat voor <em>Standard Commands for Programmable Instruments</em>. Dit onderdeel definieert een bepaald formaat voor commando's die we naar ons instrument zullen sturen. De lijst met commando's die door de firmware van onze Arduino worden ondersteund is gegeven in de <a href="../firmware/">appendix</a>.</p>
<h2 id="eerste-stappen">Eerste stappen<a class="headerlink" href="#eerste-stappen" title="Permanent link">&para;</a></h2>
<div class="admonition waarschuwing">
<p class="admonition-title">Waarschuwing</p>
<p>Let op dat je de weerstand van 220 Ω gebruikt! Een te grote weerstand zorgt ervoor dat je nauwelijks iets kunt meten, maar een te kleine weerstand zorgt ervoor dat de stroomsterkte door de Arduino te groot wordt. In dat geval zul je de Arduino onherstelbaar beschadigen. De kleurcodes voor weerstanden vind je in de <a href="../kleurcodes/">appendix</a>.</p>
</div>
<div class="admonition opdracht-basis">
<p class="admonition-title">Schakeling bouwen</p>
<p>Als je geen kant-en-klare schakeling bij je werkplek hebt liggen, druk de Arduino in het breadboard en bouw een schakeling met een LED op de manier die is weergegeven in de figuur hieronder. De weerstand heeft een waarde van 220 &Omega;. De LED heeft aan één zijde een platte kant in de dikkere ring onderaan de plastic behuizing (goed kijken!); schakel die aan de kant van de aarde (de zwarte draad), dus aan de kant van de weerstand en <em>niet</em> aan de kant van de rode draad naar de Arduino. Als de pootjes van de LED niet afgeknipt zijn, dan zit het korte pootje aan de platte zijde van de LED. Het heeft geen zin om naar het plaatje te kijken hoe het er ín de LED uitziet &mdash; dat verschilt per type LED.</p>
<p><img alt="Arduinoschakeling" src="../figures/I%2CU-curve-LED_bb.svg" style="width:50%" /></p>
</div>
<p>In de figuur hierboven is een Arduino Nano 33 IoT op een 400-punt breadboard geschakeld met een LED en een weerstand van 220 &Omega;. In een breadboard zijn in iedere rij alle kolommen A t/m E met elkaar verbonden (zo ook kolommen F t/m J). Draadjes die naast elkaar zijn geprikt zijn dus met elkaar verbonden. Zo zie je in de figuur &mdash; als je inzoomt &mdash; dat het rode draadje een verbinding maakt tussen pin A0 van de Arduino en de bovenste pin van de LED. De onderste pin van de LED is verbonden met de weerstand. De kleurcodes voor weerstanden vind je in de <a href="../kleurcodes/">appendix</a>. De kleur van de draden is niet belangrijk. Kies altijd draden met een handige lengte. De platte zijde in de ring van de LED wordt richting aarde geschakeld. De Arduino kan met deze schakeling een variabele spanning aanbrengen over de LED met weerstand, en de spanning meten over alleen de weerstand. </p>
<p>Het equivalente circuit zoals je dat zou bouwen met twee losse voltmeters is hieronder weergegeven. De cijfers 0, 1 en 2 bij $U_0$, $U_1$ en $U_2$ zijn de <em>kanalen</em> waarmee de Arduino spanningen kan sturen of uitlezen. Dat wordt zometeen belangrijk.</p>
<div id="fig:LED-schakeling"></div>
<p><img alt="LED schakelschema" src="../figures/LED-schakeling.svg" style="width:75%" /></p>
<div class="admonition info">
<p class="admonition-title">Info</p>
<p>Om met Python via het VISA-protocol te kunnen communiceren met apparaten hebben we specifieke packages nodig. Die gaan we installeren in een <em>conda environment</em>. Voor meer informatie over conda environments zie <a href="../software-tools/#conda-environments">paragraaf <em>Conda environments</em></a>.</p>
</div>
<div id="opd:condaenv"></div>
<div class="admonition opdracht-basis">
<p class="admonition-title">Environment aanmaken</p>
<p>Open een <code>Anaconda Prompt</code> die je kunt vinden via de zoekbalk van Windows. Maak de environment en installeer de juiste packages door een terminal te openen<sup id="fnref:terminal"><a class="footnote-ref" href="#fn:terminal">5</a></sup> en in te typen:</p>
<p><div class="language-ps1 highlight"><span class="filename">Terminal</span><pre><span></span><code><span id="__span-0-1"><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="n">conda</span> <span class="n">create</span> <span class="n">-n</span> <span class="n">pythondaq</span> <span class="n">-c</span> <span class="n">conda-forge</span> <span class="n">python</span> <span class="n">pyvisa-py</span>
</span></code></pre></div>
Om de conda environment daadwerkelijk te gebruiken moet je die altijd eerst <em>activeren</em> met:
<div class="language-ps1 highlight"><span class="filename">Terminal</span><pre><span></span><code><span id="__span-1-1"><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a><span class="n">conda</span> <span class="n">activate</span> <span class="n">pythondaq</span>
</span></code></pre></div></p>
</div>
<div class="admonition opdracht-basis">
<p class="admonition-title">Pyvisa in terminal</p>
<p>Sluit de Arduino met de USB-kabel aan op de computer. Om de communicatie met de Arduino te testen maken we gebruik van <code>pyvisa-shell</code>. Open een terminal, zorg dat het goede conda environment actief is en type <code>help</code>:
<div class="language-ps1con highlight"><span class="filename">Terminal</span><pre><span></span><code><span id="__span-2-1"><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a><span class="gp">PS&gt; </span><span class="n">pyvisa-shell</span> <span class="n">-b</span> <span class="n">py</span>
</span><span id="__span-2-2"><a id="__codelineno-2-2" name="__codelineno-2-2" href="#__codelineno-2-2"></a>
</span><span id="__span-2-3"><a id="__codelineno-2-3" name="__codelineno-2-3" href="#__codelineno-2-3"></a><span class="go">Welcome to the VISA shell. Type help or ? to list commands.</span>
</span><span id="__span-2-4"><a id="__codelineno-2-4" name="__codelineno-2-4" href="#__codelineno-2-4"></a>
</span><span id="__span-2-5"><a id="__codelineno-2-5" name="__codelineno-2-5" href="#__codelineno-2-5"></a><span class="gp gp-VirtualEnv">(visa)</span> <span class="go">help</span>
</span><span id="__span-2-6"><a id="__codelineno-2-6" name="__codelineno-2-6" href="#__codelineno-2-6"></a>
</span><span id="__span-2-7"><a id="__codelineno-2-7" name="__codelineno-2-7" href="#__codelineno-2-7"></a><span class="go">Documented commands (type help &lt;topic&gt;):</span>
</span><span id="__span-2-8"><a id="__codelineno-2-8" name="__codelineno-2-8" href="#__codelineno-2-8"></a><span class="go">========================================</span>
</span><span id="__span-2-9"><a id="__codelineno-2-9" name="__codelineno-2-9" href="#__codelineno-2-9"></a><span class="go">EOF  attr  close  exit  help  list  open  query  read  termchar  timeout  write</span>
</span><span id="__span-2-10"><a id="__codelineno-2-10" name="__codelineno-2-10" href="#__codelineno-2-10"></a>
</span><span id="__span-2-11"><a id="__codelineno-2-11" name="__codelineno-2-11" href="#__codelineno-2-11"></a><span class="gp gp-VirtualEnv">(visa)</span> <span class="go">help list</span>
</span><span id="__span-2-12"><a id="__codelineno-2-12" name="__codelineno-2-12" href="#__codelineno-2-12"></a><span class="go">List all connected resources.</span>
</span><span id="__span-2-13"><a id="__codelineno-2-13" name="__codelineno-2-13" href="#__codelineno-2-13"></a><span class="gp gp-VirtualEnv">(visa)</span> <span class="go">exit</span>
</span></code></pre></div></p>
</div>
<div class="admonition info">
<p class="admonition-title">Info</p>
<p>We maken hier gebruik van de optie <code>-b py</code>, wat staat voor <em>gebruik backend: python</em>. Het kan namelijk dat er, naast <code>pyvisa-py</code>, ook andere <em>backends</em>, of <em>drivers</em>, geïnstalleerd staan op het systeem die de VISA-communicatie kunnen verzorgen. Als je bijvoorbeeld LabVIEW geïnstalleerd hebt, dan heb je de drivers van National Instruments. Maar de verschillende backends geven de aangesloten apparaten andere namen. Ook ondersteunen niet alle drivers alle types apparaten en moet je ze apart downloaden en installeren. Daarom maken we liever gebruik van de beschikbare Python drivers.</p>
</div>
<p>Om verbinding te maken met onze Arduino gebruik je eerst <code>list</code> om te kijken welke apparaten aangesloten zijn en vervolgens <code>open</code> om de verbinding te openen. Je kunt makkelijk zien welk apparaat de Arduino is door éérst <code>list</code> te gebruiken zónder de Arduino aangesloten en vervolgens nog een keer mét de Arduino aangesloten &mdash; het kan een paar seconden duren voor de Arduino wordt herkend. Het laatst bijgekomen apparaat is dan de Arduino. Een commando sturen en wachten op een antwoord doe je met <code>query</code>. Als we de identificatiestring willen uitlezen wordt dit bijvoorbeeld:
<div class="language-text highlight"><pre><span></span><code><span id="__span-3-1"><a id="__codelineno-3-1" name="__codelineno-3-1" href="#__codelineno-3-1"></a>(visa) list
</span><span id="__span-3-2"><a id="__codelineno-3-2" name="__codelineno-3-2" href="#__codelineno-3-2"></a>( 0) ASRL3::INSTR
</span><span id="__span-3-3"><a id="__codelineno-3-3" name="__codelineno-3-3" href="#__codelineno-3-3"></a>( 1) ASRL5::INSTR
</span><span id="__span-3-4"><a id="__codelineno-3-4" name="__codelineno-3-4" href="#__codelineno-3-4"></a>( 2) ASRL28::INSTR
</span><span id="__span-3-5"><a id="__codelineno-3-5" name="__codelineno-3-5" href="#__codelineno-3-5"></a>(visa) open 2
</span><span id="__span-3-6"><a id="__codelineno-3-6" name="__codelineno-3-6" href="#__codelineno-3-6"></a>ASRL28::INSTR has been opened.
</span><span id="__span-3-7"><a id="__codelineno-3-7" name="__codelineno-3-7" href="#__codelineno-3-7"></a>You can talk to the device using &quot;write&quot;, &quot;read&quot; or &quot;query&quot;.
</span><span id="__span-3-8"><a id="__codelineno-3-8" name="__codelineno-3-8" href="#__codelineno-3-8"></a>The default end of message is added to each message.
</span><span id="__span-3-9"><a id="__codelineno-3-9" name="__codelineno-3-9" href="#__codelineno-3-9"></a>(open) query *IDN?
</span><span id="__span-3-10"><a id="__codelineno-3-10" name="__codelineno-3-10" href="#__codelineno-3-10"></a>Response: ERROR: UNKNOWN COMMAND *IDN?
</span><span id="__span-3-11"><a id="__codelineno-3-11" name="__codelineno-3-11" href="#__codelineno-3-11"></a>
</span><span id="__span-3-12"><a id="__codelineno-3-12" name="__codelineno-3-12" href="#__codelineno-3-12"></a>(open) exit
</span></code></pre></div></p>
<div class="admonition opdracht-basis">
<p class="admonition-title">Pyvisa error</p>
<p>Probeer zelf ook de commando's <code>list</code>, <code>open</code>, en de <code>query</code> uit. Krijg je hetzelfde resultaat?</p>
</div>
<p>Niet helemaal wat we hadden gehoopt! Als je goed kijkt in de <a href="../firmware/">documentatie van de firmware</a> dan zie je dat er bepaalde <em>terminator characters</em> nodig zijn. Dit zijn karakters die gebruikt worden om het einde van een commando te markeren. Het is, zogezegd, een <q>enter</q> aan het eind van een zin. Dit mag je heel letterlijk nemen. Oude printers voor computeruitvoer gebruikten een <em>carriage return</em> (CR) om de wagen met papier (typemachine) of de printerkop weer aan het begin van een regel te plaatsen en een <em>line feed</em> (LF) om het papier een regel verder te schuiven. Nog steeds is het zo dat in tekstbestanden deze karakters gebruikt worden om een nieuwe regel aan te geven. Jammer maar helaas, verschillende besturingssystemen hebben verschillende conventies. Windows gebruikt nog steeds allebei: een combinatie van <em>carriage return + line feed</em> (CRLF). </p>
<details class="info">
<summary>Video Carriage Return Line Feed</summary>
<p><iframe id="kmsembed-1_mwjafxs5" width="1920" height="446" src="https://video.vu.nl/embed/secure/iframe/entryId/1_mwjafxs5/uiConfId/30491791/st/0" class="kmsembed" allowfullscreen webkitallowfullscreen mozAllowFullScreen allow="autoplay *; fullscreen *; encrypted-media *" referrerPolicy="no-referrer-when-downgrade" sandbox="allow-downloads allow-forms allow-same-origin allow-scripts allow-top-navigation allow-pointer-lock allow-popups allow-modals allow-orientation-lock allow-popups-to-escape-sandbox allow-presentation allow-top-navigation-by-user-activation" frameborder="0" title="Carriage_Return_Line_Feed"></iframe></p>
</details>
<p>Maar MacOS/Linux/Unix gebruiken enkel een <em>line feed</em> (LF), want hoeveel meer heb je nodig? Af en toe is dat lastig, vooral wanneer er elektronica in het spel is want dan willen de regeleindes voor schrijven en lezen nog wel eens verschillend zijn.<sup id="fnref:regeleindes"><a class="footnote-ref" href="#fn:regeleindes">6</a></sup> We gaan nu het gebruik van de karakters instellen:</p>
<p><div class="language-text highlight"><pre><span></span><code><span id="__span-4-1"><a id="__codelineno-4-1" name="__codelineno-4-1" href="#__codelineno-4-1"></a>(open) termchar
</span><span id="__span-4-2"><a id="__codelineno-4-2" name="__codelineno-4-2" href="#__codelineno-4-2"></a>Termchar read: None write: CRLF
</span><span id="__span-4-3"><a id="__codelineno-4-3" name="__codelineno-4-3" href="#__codelineno-4-3"></a>(open) termchar CRLF LF
</span><span id="__span-4-4"><a id="__codelineno-4-4" name="__codelineno-4-4" href="#__codelineno-4-4"></a>Done
</span><span id="__span-4-5"><a id="__codelineno-4-5" name="__codelineno-4-5" href="#__codelineno-4-5"></a>(open) termchar
</span><span id="__span-4-6"><a id="__codelineno-4-6" name="__codelineno-4-6" href="#__codelineno-4-6"></a>Termchar read: CRLF write: LF
</span><span id="__span-4-7"><a id="__codelineno-4-7" name="__codelineno-4-7" href="#__codelineno-4-7"></a>(open) query *IDN?
</span><span id="__span-4-8"><a id="__codelineno-4-8" name="__codelineno-4-8" href="#__codelineno-4-8"></a>Response: Arduino VISA firmware v1.0.0
</span></code></pre></div>
Omdat de Arduino nu weet wanneer het commando voorbij is (door de LF aan het eind van de <q>zin</q>) krijgen we antwoord! Dat antwoord heeft dan juist weer een CRLF aan het eind dus <code>pyvisa-shell</code> weet wanneer het kan stoppen met luisteren en print het antwoord op het scherm. De karakters CRLF en LF <em>zelf</em> blijven onzichtbaar voor ons.</p>
<div class="admonition opdracht-basis">
<p class="admonition-title">Pyvisa regeleindes</p>
<p>Stel zelf ook de regeleindes goed in en probeer of je antwoord krijgt van de Arduino. Heeft jouw Arduino de nieuwste firmware?
Speel eens met de commando's en kijk of je de LED kunt laten branden of een spanning kunt meten. Bijvoorbeeld:
<div class="language-text highlight"><pre><span></span><code><span id="__span-5-1"><a id="__codelineno-5-1" name="__codelineno-5-1" href="#__codelineno-5-1"></a>(open) query OUT:CH0 768
</span><span id="__span-5-2"><a id="__codelineno-5-2" name="__codelineno-5-2" href="#__codelineno-5-2"></a>Response: 768
</span><span id="__span-5-3"><a id="__codelineno-5-3" name="__codelineno-5-3" href="#__codelineno-5-3"></a>(open) query MEAS:CH2?
</span><span id="__span-5-4"><a id="__codelineno-5-4" name="__codelineno-5-4" href="#__codelineno-5-4"></a>Response: 209
</span></code></pre></div></p>
<ul>
<li>Wat is de <em>minimale waarde</em> waarbij de LED <em>net</em> licht geeft? </li>
<li>Laat de spanning steeds verder oplopen; op een gegeven moment gebeurt er iets raars. </li>
<li>Wat is de <em>maximale waarde</em> waarbij de LED zonder problemen kan branden?</li>
</ul>
</div>
<h2 id="een-eenvoudig-script">Een eenvoudig script<a class="headerlink" href="#een-eenvoudig-script" title="Permanent link">&para;</a></h2>
<p>We hebben via de shell contact gelegd met de hardware. Nu wordt het tijd om, met de documentatie<sup id="fnref:8"><a class="footnote-ref" href="#fn:8">15</a></sup> in de aanslag, hetzelfde vanuit Python te doen. Als je met een nieuw project begint is het helemaal geen gek idee om een kort script te schrijven waarin je wat dingen uitprobeert. Als alles lijkt te werken kun je het netjes gaan maken en gaan uitbreiden. We beginnen hier met een eenvoudig script en zullen dat daarna gaan verfijnen.</p>
<p>We lopen het voorbeeldscript eerst regel voor regel door en geven het volledige script aan het eind. Allereerst importeren we de <code>pyvisa</code>-bibliotheek met
<div class="language-py highlight"><pre><span></span><code><span id="__span-6-1"><a id="__codelineno-6-1" name="__codelineno-6-1" href="#__codelineno-6-1"></a><span class="kn">import</span> <span class="nn">pyvisa</span>
</span></code></pre></div>
Binnen pyvisa wordt alles geregeld met behulp van een <em>Resource Manager</em>. Die krijgen we met
<div class="language-py highlight"><pre><span></span><code><span id="__span-7-1"><a id="__codelineno-7-1" name="__codelineno-7-1" href="#__codelineno-7-1"></a><span class="n">rm</span> <span class="o">=</span> <span class="n">pyvisa</span><span class="o">.</span><span class="n">ResourceManager</span><span class="p">(</span><span class="s2">&quot;@py&quot;</span><span class="p">)</span>
</span></code></pre></div>
Die kunnen we bijvoorbeeld gebruiken om een lijst van alle beschikbare poorten te krijgen:
<div class="language-py highlight"><pre><span></span><code><span id="__span-8-1"><a id="__codelineno-8-1" name="__codelineno-8-1" href="#__codelineno-8-1"></a><span class="n">ports</span> <span class="o">=</span> <span class="n">rm</span><span class="o">.</span><span class="n">list_resources</span><span class="p">()</span>
</span><span id="__span-8-2"><a id="__codelineno-8-2" name="__codelineno-8-2" href="#__codelineno-8-2"></a>
</span><span id="__span-8-3"><a id="__codelineno-8-3" name="__codelineno-8-3" href="#__codelineno-8-3"></a><span class="c1"># Bijvoorbeeld: (&quot;ASRL3::INSTR&quot;,)</span>
</span></code></pre></div>
Om nu daadwerkelijk verbinding te gaan maken met de Arduino moeten we die <em>openen</em>. Daarvoor geven we de poortnaam op en vertellen we meteen wat de instellingen moeten zijn voor de regeleindes bij het lezen (CRLF, <code class="language-py highlight"><span class="s2">&quot;</span><span class="se">\r\n</span><span class="s2">&quot;</span></code>) en het schrijven (LF, <code class="language-py highlight"><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span></code>):
<div class="language-py highlight"><pre><span></span><code><span id="__span-9-1"><a id="__codelineno-9-1" name="__codelineno-9-1" href="#__codelineno-9-1"></a><span class="n">device</span> <span class="o">=</span> <span class="n">rm</span><span class="o">.</span><span class="n">open_resource</span><span class="p">(</span>
</span><span id="__span-9-2"><a id="__codelineno-9-2" name="__codelineno-9-2" href="#__codelineno-9-2"></a>    <span class="s2">&quot;ASRL3::INSTR&quot;</span><span class="p">,</span> <span class="n">read_termination</span><span class="o">=</span><span class="s2">&quot;</span><span class="se">\r\n</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">write_termination</span><span class="o">=</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span>
</span><span id="__span-9-3"><a id="__codelineno-9-3" name="__codelineno-9-3" href="#__codelineno-9-3"></a><span class="p">)</span>
</span></code></pre></div>
Ten slotte sturen we een query naar de Arduino:
<div class="language-py highlight"><pre><span></span><code><span id="__span-10-1"><a id="__codelineno-10-1" name="__codelineno-10-1" href="#__codelineno-10-1"></a><span class="n">device</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s2">&quot;*IDN?&quot;</span><span class="p">)</span>
</span></code></pre></div>
Het volledige script &mdash; met een paar <code class="language-py highlight"><span class="nb">print</span></code>-statements &mdash; ziet er dan als volgt uit:</p>
<div class="language-py highlight"><pre><span></span><code><span id="__span-11-1"><a id="__codelineno-11-1" name="__codelineno-11-1" href="#__codelineno-11-1"></a><span class="kn">import</span> <span class="nn">pyvisa</span>
</span><span id="__span-11-2"><a id="__codelineno-11-2" name="__codelineno-11-2" href="#__codelineno-11-2"></a>
</span><span id="__span-11-3"><a id="__codelineno-11-3" name="__codelineno-11-3" href="#__codelineno-11-3"></a><span class="n">rm</span> <span class="o">=</span> <span class="n">pyvisa</span><span class="o">.</span><span class="n">ResourceManager</span><span class="p">(</span><span class="s2">&quot;@py&quot;</span><span class="p">)</span>
</span><span id="__span-11-4"><a id="__codelineno-11-4" name="__codelineno-11-4" href="#__codelineno-11-4"></a><span class="n">ports</span> <span class="o">=</span> <span class="n">rm</span><span class="o">.</span><span class="n">list_resources</span><span class="p">()</span>
</span><span id="__span-11-5"><a id="__codelineno-11-5" name="__codelineno-11-5" href="#__codelineno-11-5"></a><span class="nb">print</span><span class="p">(</span><span class="n">ports</span><span class="p">)</span>
</span><span id="__span-11-6"><a id="__codelineno-11-6" name="__codelineno-11-6" href="#__codelineno-11-6"></a>
</span><span id="__span-11-7"><a id="__codelineno-11-7" name="__codelineno-11-7" href="#__codelineno-11-7"></a><span class="n">device</span> <span class="o">=</span> <span class="n">rm</span><span class="o">.</span><span class="n">open_resource</span><span class="p">(</span>
</span><span id="__span-11-8"><a id="__codelineno-11-8" name="__codelineno-11-8" href="#__codelineno-11-8"></a>    <span class="s2">&quot;ASRL3::INSTR&quot;</span><span class="p">,</span> <span class="n">read_termination</span><span class="o">=</span><span class="s2">&quot;</span><span class="se">\r\n</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">write_termination</span><span class="o">=</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span>
</span><span id="__span-11-9"><a id="__codelineno-11-9" name="__codelineno-11-9" href="#__codelineno-11-9"></a><span class="p">)</span>
</span><span id="__span-11-10"><a id="__codelineno-11-10" name="__codelineno-11-10" href="#__codelineno-11-10"></a><span class="nb">print</span><span class="p">(</span><span class="n">device</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s2">&quot;*IDN?&quot;</span><span class="p">))</span>
</span></code></pre></div>
<div id="opd:test_arduino"></div>
<div class="admonition opdracht-basis">
<p class="admonition-title">Pyvisa in pythonscript</p>
<p>Maak in een geschikte map een bestand <span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 384 512"><!--! Font Awesome Free 6.4.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M64 464c-8.8 0-16-7.2-16-16V64c0-8.8 7.2-16 16-16h160v80c0 17.7 14.3 32 32 32h80v288c0 8.8-7.2 16-16 16H64zM64 0C28.7 0 0 28.7 0 64v384c0 35.3 28.7 64 64 64h256c35.3 0 64-28.7 64-64V154.5c0-17-6.7-33.3-18.7-45.3l-90.6-90.5C262.7 6.7 246.5 0 229.5 0H64zm97 289c9.4-9.4 9.4-24.6 0-33.9s-24.6-9.4-33.9 0L79 303c-9.4 9.4-9.4 24.6 0 33.9l48 48c9.4 9.4 24.6 9.4 33.9 0s9.4-24.6 0-33.9l-31-31 31-31zm96-34c-9.4-9.4-24.6-9.4-33.9 0s-9.4 24.6 0 33.9l31 31-31 31c-9.4 9.4-9.4 24.6 0 33.9s24.6 9.4 33.9 0l48-48c9.4-9.4 9.4-24.6 0-33.9l-48-48z"/></svg></span><code>test_arduino.py</code> en kopieer daarin bovenstaande code. Selecteer vervolgens in Visual Studio Code je conda environment zodat je het script ook daadwerkelijk kunt runnen. Hoe je dat doet lees je aan het eind van de <a href="../software-tools/#conda-environments">paragraaf <em>Conda environments</em></a>. Sluit alle terminals.</p>
</div>
<p>Draaien we het script, dan zien we, afhankelijk van het systeem en het aantal apparaten dat verbonden is:
<div class="language-text highlight"><pre><span></span><code><span id="__span-12-1"><a id="__codelineno-12-1" name="__codelineno-12-1" href="#__codelineno-12-1"></a>(&#39;ASRL3::INSTR&#39;,)
</span><span id="__span-12-2"><a id="__codelineno-12-2" name="__codelineno-12-2" href="#__codelineno-12-2"></a>Arduino VISA firmware v1.0.0
</span></code></pre></div></p>
<p>Het kan zijn dat het script bij jullie crasht met een foutmelding. Krijg je een <code class="language-py highlight"><span class="ne">PermissionError</span></code>? Dan heb je vast nog een terminal openstaan waarin <code>pyvisa-shell</code> actief is. Een andere reden kan zijn dat het script probeert een poort te openen die bij jullie een andere naam heeft. Probeer met het lijstje instrumenten te raden welke de Arduino is en pas het script aan totdat het werkt.<sup id="fnref:tip-aansluiten"><a class="footnote-ref" href="#fn:tip-aansluiten">7</a></sup></p>
<div class="admonition info">
<p class="admonition-title">Info</p>
<p>In het vervolg gaan we commando's naar de Arduino sturen waar een variabele spanning in staat. Je kunt dit het makkelijkst doen met f-strings, zoals
<div class="language-py highlight"><pre><span></span><code><span id="__span-13-1"><a id="__codelineno-13-1" name="__codelineno-13-1" href="#__codelineno-13-1"></a><span class="n">naam</span> <span class="o">=</span> <span class="s2">&quot;Alice&quot;</span>
</span><span id="__span-13-2"><a id="__codelineno-13-2" name="__codelineno-13-2" href="#__codelineno-13-2"></a><span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Hoi </span><span class="si">{</span><span class="n">naam</span><span class="si">}</span><span class="s2">!&quot;</span><span class="p">)</span>
</span></code></pre></div>
en minder makkelijk met
<div class="language-py highlight"><pre><span></span><code><span id="__span-14-1"><a id="__codelineno-14-1" name="__codelineno-14-1" href="#__codelineno-14-1"></a><span class="n">naam</span> <span class="o">=</span> <span class="s2">&quot;Alice&quot;</span>
</span><span id="__span-14-2"><a id="__codelineno-14-2" name="__codelineno-14-2" href="#__codelineno-14-2"></a><span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hoi </span><span class="si">%s</span><span class="s2">!&quot;</span> <span class="o">%</span> <span class="n">naam</span><span class="p">)</span>
</span></code></pre></div>
Als je (nog) geen idee hebt wat dat inhoudt, lees dan de tutorial <em>Python 3's f-strings: an improved string formatting syntax</em> op Real Python.<sup id="fnref:9"><a class="footnote-ref" href="#fn:9">16</a></sup></p>
</div>
<div class="admonition opdracht-basis">
<p class="admonition-title">LED laten branden</p>
<p>Schrijf een script dat de spanning over de LED laat oplopen van nul tot de maximale waarde. Wat gebeurt er als je de spanning laat oplopen tot twee keer die maximale waarde?</p>
</div>
<div id="opd:knipperled"></div>
<div class="admonition opdracht-basis">
<p class="admonition-title">KnipperLED</p>
<p>Je kunt de LED ook andere dingen laten doen. Maak een bestand <span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 384 512"><!--! Font Awesome Free 6.4.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M64 464c-8.8 0-16-7.2-16-16V64c0-8.8 7.2-16 16-16h160v80c0 17.7 14.3 32 32 32h80v288c0 8.8-7.2 16-16 16H64zM64 0C28.7 0 0 28.7 0 64v384c0 35.3 28.7 64 64 64h256c35.3 0 64-28.7 64-64V154.5c0-17-6.7-33.3-18.7-45.3l-90.6-90.5C262.7 6.7 246.5 0 229.5 0H64zm97 289c9.4-9.4 9.4-24.6 0-33.9s-24.6-9.4-33.9 0L79 303c-9.4 9.4-9.4 24.6 0 33.9l48 48c9.4 9.4 24.6 9.4 33.9 0s9.4-24.6 0-33.9l-31-31 31-31zm96-34c-9.4-9.4-24.6-9.4-33.9 0s-9.4 24.6 0 33.9l31 31-31 31c-9.4 9.4-9.4 24.6 0 33.9s24.6 9.4 33.9 0l48-48c9.4-9.4 9.4-24.6 0-33.9l-48-48z"/></svg></span><code>knipperLED.py</code> en maak een van de onderstaande opdrachten:</p>
<ul>
<li>Laat de LED in een regelmatig tempo knipperen.</li>
<li>Maak een <em>breathing light</em> &mdash; een lamp die langzaam aan en uit gaat gevolgd door een pauze in het tempo dat iemand in- en uitademt.</li>
<li>Maak een <em>heartbeat light</em> &mdash; een lamp die twee keer kort na elkaar flitst gevolgd door een pauze in het tempo van een hartslag.</li>
<li>Bedenk je eigen knipperritme.</li>
</ul>
</div>
<div class="footnote">
<hr />
<ol>
<li id="fn:firmware">
<p>Firmware is software die in hardware is geprogrammeerd. Bijvoorbeeld het <q>computerprogramma</q> dat ervoor zorgt dat je magnetron reageert op de knoppen en je eten verwarmd.&#160;<a class="footnote-backref" href="#fnref:firmware" title="Jump back to footnote 1 in the text">&#8617;</a></p>
</li>
<li id="fn:proprietary">
<p><em>Proprietary</em> betekent dat een bedrijf of individu exclusieve de rechten heeft over het protocol of de software en anderen geen toegang geeft tot de details.&#160;<a class="footnote-backref" href="#fnref:proprietary" title="Jump back to footnote 2 in the text">&#8617;</a></p>
</li>
<li id="fn:drivers">
<p>Niet zelden zijn dergelijke bibliotheken maar op een paar besturingssystemen beschikbaar als <em>driver</em>. Gebruik je MacOS in plaats van Windows en het wordt alleen op Windows ondersteund? Dan kun je je dure meetinstrument dus niet gebruiken totdat je overstapt.&#160;<a class="footnote-backref" href="#fnref:drivers" title="Jump back to footnote 3 in the text">&#8617;</a></p>
</li>
<li id="fn:picoscope">
<p>Die overigens op vrijwel alle platforms en voor veel programmeertalen bibliotheken leveren.&#160;<a class="footnote-backref" href="#fnref:picoscope" title="Jump back to footnote 4 in the text">&#8617;</a></p>
</li>
<li id="fn:terminal">
<p>Start de applicatie <code>Anaconda Powershell Prompt</code> of start een terminal binnen Visual Studio Code met het menu <strong>Terminal &gt; New Terminal</strong>.&#160;<a class="footnote-backref" href="#fnref:terminal" title="Jump back to footnote 5 in the text">&#8617;</a></p>
</li>
<li id="fn:regeleindes">
<p>De regeleindes voor de Arduinofirmware zijn verschillend voor lezen en schrijven. Dit heeft een oninteressante reden: bij het ontvangen van commando's is het makkelijk om alles te lezen totdat je één bepaald karakter (LF) tegenkomt. Bij het schrijven gebruikt de standaard <code>println</code>-functie een Windows-stijl regeleinde (CRLF).&#160;<a class="footnote-backref" href="#fnref:regeleindes" title="Jump back to footnote 6 in the text">&#8617;</a></p>
</li>
<li id="fn:tip-aansluiten">
<p>Tip: als je de Arduino loshaalt en weer aansluit is het de nieuwe regel in het lijstje.&#160;<a class="footnote-backref" href="#fnref:tip-aansluiten" title="Jump back to footnote 7 in the text">&#8617;</a></p>
</li>
<li id="fn:1">
<p>Arduino AG. Arduino nano 33 iot. URL: <a href="https://store.arduino.cc/arduino-nano-33-iot">https://store.arduino.cc/arduino-nano-33-iot</a>.&#160;<a class="footnote-backref" href="#fnref:1" title="Jump back to footnote 8 in the text">&#8617;</a></p>
</li>
<li id="fn:2">
<p>David B.R.A. Fokkema. Arduino visa firmware. 2020. URL: <a href="https://github.com/davidfokkema/arduino-visa-firmware">https://github.com/davidfokkema/arduino-visa-firmware</a>.&#160;<a class="footnote-backref" href="#fnref:2" title="Jump back to footnote 9 in the text">&#8617;</a></p>
</li>
<li id="fn:3">
<p>IVI Foundation. Vpp-4.3: the visa library. 2018. URL: <a href="https://www.ivifoundation.org/downloads/Architecture Specifications/IVIspecstopost10-22-2018/vpp43_2018-10-19.pdf">https://www.ivifoundation.org/downloads/Architecture Specifications/IVIspecstopost10-22-2018/vpp43_2018-10-19.pdf</a>.&#160;<a class="footnote-backref" href="#fnref:3" title="Jump back to footnote 10 in the text">&#8617;</a></p>
</li>
<li id="fn:4">
<p>Tektronix, Inc. URL: <a href="https://www.tek.com/">https://www.tek.com/</a>.&#160;<a class="footnote-backref" href="#fnref:4" title="Jump back to footnote 11 in the text">&#8617;</a></p>
</li>
<li id="fn:5">
<p>National Instruments Corp. URL: <a href="https://www.ni.com/">https://www.ni.com/</a>.&#160;<a class="footnote-backref" href="#fnref:5" title="Jump back to footnote 12 in the text">&#8617;</a></p>
</li>
<li id="fn:6">
<p>Pico Technology Limited. URL: <a href="https://www.picotech.com/">https://www.picotech.com/</a>.&#160;<a class="footnote-backref" href="#fnref:6" title="Jump back to footnote 13 in the text">&#8617;</a></p>
</li>
<li id="fn:7">
<p>SCPI Consortium. Standard commands for programmable instruments (scpi). 1999. URL: <a href="https://www.ivifoundation.org/docs/scpi-99.pdf">https://www.ivifoundation.org/docs/scpi-99.pdf</a>.&#160;<a class="footnote-backref" href="#fnref:7" title="Jump back to footnote 14 in the text">&#8617;</a></p>
</li>
<li id="fn:8">
<p>PyVISA Authors. Pyvisa: control your instruments with python. URL: <a href="https://pyvisa.readthedocs.io/en/latest/">https://pyvisa.readthedocs.io/en/latest/</a>.&#160;<a class="footnote-backref" href="#fnref:8" title="Jump back to footnote 15 in the text">&#8617;</a></p>
</li>
<li id="fn:9">
<p>Joanna Jablonski. Python 3's f-strings: an improved string formatting syntax (guide). 2022. URL: <a href="https://realpython.com/python-f-strings/">https://realpython.com/python-f-strings/</a>.&#160;<a class="footnote-backref" href="#fnref:9" title="Jump back to footnote 16 in the text">&#8617;</a></p>
</li>
</ol>
</div>





                
              </article>
            </div>
          
          
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    <script id="__config" type="application/json">{"base": "..", "features": ["content.code.copy"], "search": "../assets/javascripts/workers/search.74e28a9f.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../assets/javascripts/bundle.220ee61c.min.js"></script>
      
        
          <script src="../javascripts/katex.js"></script>
        
      
        
          <script src="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.7/katex.min.js"></script>
        
      
        
          <script src="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.7/contrib/auto-render.min.js"></script>
        
      
    
  </body>
</html>